<view class="content"><view class="productPic"><swiper indicator-dots="{{false}}" autoplay="{{false}}" interval="{{3000}}" duration="{{400}}" data-event-opts="{{[['animationfinish',[['imgChange',['$event']]]]]}}" bindanimationfinish="__e"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="ind" wx:key="ind"><swiper-item><view class="swiper-item"><image src="{{item.m0}}" mode="widthFix"></image></view></swiper-item></block></swiper><view class="page">{{imgInd+"/"+prodDetail.imgList.length}}</view></view><view class="modal prod1"><view class="name clamp clamp-2 fs15">{{prodDetail.name}}</view><view class="price red"><text class="fs12">¥</text><text class="fs18">{{prodDetail.priceSale}}</text><block wx:if="{{freight>0}}"><text class="yunfei">{{"运费："+freight+"元"}}</text></block><block wx:if="{{prodDetail.isSellOut}}"><text class="float-right c999 fs12">已售罄</text></block><block wx:else><text class="float-right c999 fs12">{{"销量"+prodDetail.numTotalSale+"件"}}</text></block></view><button class="iconfont icon-share" open-type="share">分享</button></view><view class="modal prod2"><view class="flex item-center"><view class="c999">精灵</view><block wx:if="{{prodDetail.spiritDiscount.hasDiscount}}"><view class="pic"><image src="/static/images/animal/jl1.png" mode="widthFix"></image></view></block><block wx:if="{{prodDetail.spiritDiscount.hasDiscount}}"><view class="flex-1 text-right red">{{''+prodDetail.spiritDiscount.spiritList[0].name+"\n\t\t\t"+prodDetail.spiritDiscount.spiritList[0].priceDiscount+'折'}}</view></block><block wx:else><view class="flex-1 text-right c999">本商品不支持精灵折扣</view></block></view></view><view class="modal prod3"><view class="coupon flex"><view class="name c999">领取</view><block wx:if="{{prodDetail.couponList.length>0}}"><view class="listBox flex-1"><scroll-view scroll-x="true"><block wx:for="{{prodDetail.couponList}}" wx:for-item="item" wx:for-index="ind" wx:key="ind"><block><view data-event-opts="{{[['tap',[['chooseCoupon',[ind,'$0'],[[['prodDetail.couponList','',ind,'couponId']]]]]]]}}" class="{{['item',(item.hasReceived)?'hasReceived':'']}}" bindtap="__e">{{''+item.name+''}}</view></block></block></scroll-view></view></block><block wx:else><view class="text flex-1">暂无可领取的优惠券</view></block></view><view class="service flex"><view class="name c999">服务</view><view class="listBox flex-1"><scroll-view scroll-x="true"><view class="item">假一赔三</view><view class="item">无理由退款</view><view class="item">消费者保障</view></scroll-view></view></view></view><block wx:if="{{prodDetail.flagSpell==1&&prodDetail.orderSpellList.length>0}}"><view class="modal assemble"><view class="title">{{''+prodDetail.orderSpellList.length+'人在拼单，可直接参与'}}<text data-event-opts="{{[['tap',[['moreassemble']]]]}}" class="float-right red" bindtap="__e">查看全部</text></view><view class="list"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="ind" wx:key="ind"><view class="item flex item-center"><view class="pic"><image src="{{item.m1}}" mode="widthFix"></image></view><view class="name textEllipsis">{{item.$orig.firstUserName}}</view><view class="time flex-1 text-center"><view>{{"还差"+item.$orig.numUserLeft+"人成团"}}</view><block wx:if="{{item.$orig.showTimer}}"><view class="fs12 c999">剩余<uni-count-down vue-id="{{'1-'+ind}}" show-day="{{false}}" color="{{color}}" splitorColor="{{color}}" show-style="{{false}}" hour="{{item.$orig.hour}}" minute="{{item.$orig.minute}}" second="{{item.$orig.second}}" bind:__l="__l"></uni-count-down></view></block></view><view><block wx:if="{{item.$orig.firstUserIsOwner}}"><block><button type="blue" size="mini" open-type="share">邀请好友</button></block></block><block wx:else><block><block wx:if="{{item.$orig.hasJoin}}"><button type="green" size="mini">查看</button></block><block wx:else><button type="orange" size="mini" data-event-opts="{{[['tap',[['joinGroup',['$0'],[[['prodDetail.orderSpellList','',ind]]]]]]]}}" bindtap="__e">去拼单</button></block></block></block></view></view></block></view></view></block><view class="modal prod4 flex item-center"><view class="pic"><image src="{{$root.m2}}" mode="widthFix"></image></view><view class="name flex-1"><view class="title blod">{{prodDetail.shopInfo.name}}</view><view class="textEllipsis c999 fs13">{{prodDetail.shopInfo.describe}}</view></view><view class="btn"><button class="radiuBtn" type="red" size="mini" data-event-opts="{{[['tap',[['shopDetail',['$0'],['prodDetail.shopInfo.id']]]]]}}" bindtap="__e">进店逛逛</button></view></view><view class="modal prod5"><view class="title">{{'商品评价（'+commontList.length+'条）'}}<text data-event-opts="{{[['tap',[['showAllComment']]]]}}" class="red float-right" bindtap="__e">查看全部</text></view><view class="list"><block wx:for="{{$root.l3}}" wx:for-item="item" wx:for-index="ind" wx:key="ind"><view class="item"><view class="item-top flex item-center"><view class="pic imgCirc"><image src="{{item.m3}}" mode="widthFix"></image></view><view class="name flex-1 textEllipsis">{{''+item.$orig.userInfo.nickName+''}}</view><view class="star"><block wx:for="{{[1,2,3,4,5]}}" wx:for-item="numitem" wx:for-index="numind" wx:key="numind"><block><block wx:if="{{numitem<=item.$orig.gradeZh}}"><image src="/static/images/yellow_star.png" mode="widthFix"></image></block><block wx:else><image src="/static/images/gray_star.png" mode="widthFix"></image></block></block></block></view></view><view class="text clamp clamp-2">{{''+(item.$orig.content?item.$orig.content:'')+''}}</view><view class="imgList clearfix"><block wx:for="{{item.l2}}" wx:for-item="imgItem" wx:for-index="imgInd" wx:key="imgInd"><view class="imgItem"><view data-event-opts="{{[['tap',[['showBig',[ind,imgInd]]]]]}}" class="imgBox" bindtap="__e"><image src="{{imgItem.m4}}" mode="widthFix"></image></view></view></block></view><view class="time fs12 c999"><text>{{item.$orig.skuPropValue}}</text><text>{{item.$orig.commentTime}}</text></view></view></block></view></view><view class="modal productDetail"><view class="title blod">商品详情</view><view class="goodsAttr"><view class="flex"><view class="name c999">商品编号</view><view class="value flex-1">{{''+prodDetail.code+''}}</view></view><view class="flex"><view class="name c999">品牌</view><view class="value flex-1">{{''+prodDetail.brandName+''}}</view></view></view><view class="goodsMsg"><rich-text nodes="{{prodDetail.describe}}"></rich-text></view></view><view class="prodFoot"><view class="flex item-center"><view data-event-opts="{{[['tap',[['shopDetail',['$0'],['prodDetail.shopInfo.id']]]]]}}" class="item" bindtap="__e"><icon class="iconfont icon-shop"></icon><view class="fs12 c999">店铺</view></view><view class="item"><icon class="iconfont icon-kefu"></icon><view class="fs12 c999">客服</view></view><view class="item"><icon class="iconfont iconshare2"></icon><view class="fs12 c999">分享</view><button open-type="share"></button></view><view class="flex-1 flex"><block wx:if="{{prodDetail.flagSpell==1}}"><block><view data-event-opts="{{[['tap',[['setSpecInfo',['order']]]]]}}" class="btn btn2 flex-1 flex f-col just-con-c" bindtap="__e"><view class="price">{{'¥ '+chooseSpec.priceSale+''}}</view><view class="text">单独购买</view></view><view data-event-opts="{{[['tap',[['setSpecInfo',['spell']]]]]}}" class="btn btn1 flex-1 flex f-col just-con-c" bindtap="__e"><view class="price">{{'¥ '+chooseSpec.priceSpell+''}}</view><view class="text">发起拼单</view></view></block></block><block wx:else><block><view class="btn btn1 flex-1 flex f-col just-con-c"><view data-event-opts="{{[['tap',[['setSpecInfo',['order']]]]]}}" class="buy" bindtap="__e">立即购买</view></view></block></block></view></view></view><block wx:if="{{showAssembleModal}}"><view class="comDialog assembleModal flex item-center just-con-c"><view class="moadl-main"><view class="title">正在拼单<icon data-event-opts="{{[['tap',[['closeModal',['$event']]]]]}}" class="iconfont icon-remove" bindtap="__e"></icon></view><view class="assemble listBox"><block wx:for="{{$root.l4}}" wx:for-item="item" wx:for-index="ind" wx:key="ind"><view class="item flex item-center"><view class="pic"><image src="{{item.m5}}" mode="widthFix"></image></view><view class="name textEllipsis">{{item.$orig.firstUserName}}</view><view class="time flex-1 text-center"><view>{{"还差"+item.$orig.numUserLeft+"人成团"}}</view><block wx:if="{{item.$orig.showTimer}}"><view class="fs12 c999">剩余<uni-count-down vue-id="{{'2-'+ind}}" show-day="{{false}}" color="{{color}}" splitorColor="{{color}}" show-style="{{false}}" hour="{{item.$orig.hour}}" minute="{{item.$orig.minute}}" second="{{item.$orig.second}}" bind:__l="__l"></uni-count-down></view></block></view><view><block wx:if="{{item.$orig.firstUserIsOwner}}"><block><button type="blue" size="mini" open-type="share">邀请好友</button></block></block><block wx:else><block><block wx:if="{{item.$orig.hasJoin}}"><button type="green" size="mini">查看</button></block><block wx:else><button type="orange" size="mini" data-event-opts="{{[['tap',[['joinGroup',['$0'],[[['prodDetail.orderSpellList','',ind]]]]]]]}}" bindtap="__e">去拼单</button></block></block></block></view></view></block></view></view></view></block><block wx:if="{{showAssembleDetailModal}}"><view class="comDialog flex item-center just-con-c assembleDetail"><view class="moadl-main"><view class="title">参与拼单<icon data-event-opts="{{[['tap',[['closeModal',['$event']]]]]}}" class="iconfont icon-remove" bindtap="__e"></icon></view><view class="detailMain"><view class="msg">仅剩<text class="red">{{spellVO.numUserLeft+"个"}}</text>名额，还剩<block wx:if="{{spellVO.showTimer}}"><view class="fs12 c999"><uni-count-down vue-id="3" show-day="{{false}}" color="{{color}}" splitorColor="{{color}}" show-style="{{false}}" hour="{{spellVO.hour}}" minute="{{spellVO.minute}}" second="{{spellVO.second}}" bind:__l="__l"></uni-count-down></view></block></view><view class="picList"><view class="item"><view class="name">拼主</view><view class="pic"><image src="{{spellVO.firstUserImgPath}}" mode="widthFix"></image></view></view><block wx:for="{{spellVO.userList}}" wx:for-item="item" wx:for-index="ind" wx:key="ind"><view class="item"><view class="name">{{item.userName}}</view><view class="pic"><image src="{{item.imgHeadPath}}" mode="widthFix"></image></view></view></block></view><view class="btnBox"><button type="red" data-event-opts="{{[['tap',[['joinSpell',['$0'],['id']]]]]}}" bindtap="__e">参与拼单</button></view></view></view></view></block><block wx:if="{{showSpecModal}}"><view class="comDialog specsModal"><view class="specsBody _div"><view class="md_head flex item-center"><view class="pic"><image src="{{$root.m6}}"></image></view><view class="price flex-1"><view class="red"><text class="fs12">¥</text><text class="fs18">{{chooseSpec.priceSale}}</text></view><view class="text">请选择规格</view></view><icon data-event-opts="{{[['tap',[['closeModal',['$event']]]]]}}" class="iconfont icon-remove" bindtap="__e"></icon></view><view class="spec_main"><view class="item"><view class="specBox"><block wx:for="{{prodDetail.skuList}}" wx:for-item="item" wx:for-index="ind" wx:key="ind"><block><view data-event-opts="{{[['tap',[['chooseSku',[ind]]]]]}}" class="{{['item_child textEllipsis',(item.choose)?'active':'']}}" bindtap="__e">{{item.propValue}}</view></block></block></view></view></view><view class="nums flex item-center"><view class="flex-1">购买数量</view><view class="comNumber clearfix"><view class="iconfont icon-minus" style="color:#333333;" hover-class="touch" data-event-opts="{{[['tap',[['minus']]]]}}" bindtap="__e"></view><input type="number" value="{{goodsNum}}" data-event-opts="{{[['input',[['__set_model',['','goodsNum','$event',[]]]]]]}}" bindinput="__e"/><view class="iconfont icon-plus" style="color:#333333;" hover-class="touch" data-event-opts="{{[['tap',[['plus']]]]}}" bindtap="__e"></view></view></view><view class="btnBox"><button class="noradius" type="red" data-event-opts="{{[['tap',[['confirmOrder',['$event']]]]]}}" bindtap="__e">确定</button></view></view></view></block></view>